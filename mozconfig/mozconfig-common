# convert a.b.c to 100*a + 10*b + c for numeric comparisons.
tonumber() (IFS='. ';let v=0; m=100;digits="$1";for d in $digits; do let v=v+d*m; let m=m/10; done; echo $v)
# compare two numbers
lessthan() (if [[ `tonumber $1` -lt `tonumber $2` ]]; then return 0; else return 1; fi )

if [[ -n "$NUMBER_OF_PROCESSORS" ]]; then
   CPU=$NUMBER_OF_PROCESSORS
else
        CPU=`sysctl -a hw 2>&1 | grep 'hw.availcpu' | sed 's|hw.availcpu = *||'`
fi
let J=$CPU+1
if [[ $J -gt 4 ]]; then let J=4; fi
