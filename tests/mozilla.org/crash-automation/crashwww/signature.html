<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Signature </title>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
    <link rel="stylesheet" href="crash.css" type="text/css">
    <script src="script/jquery.js?1.3.1"></script>
    <script src="crash-common.js"></script>
    <script>
      $(document).ready(function() {
        var sig = /\?(.*)/.exec(location);
        if(!sig) {
          $('#container').replaceWith("<p class=not-found>Signature not found</p>");
          return;
        }
        $.getJSON("/crashtest/" + sig[1], showSignature);
      })

      function showSignature(sig) {
         if(sig.reproduced) {
           $('#reproduced-message').append("<div class='reproduced'>Reproduced</div>");
         }
 
         var bugs = sig.bug_list.split(/[\,\ \;]/);
         var bugsHTML = '';
         for(var j = 0; j < bugs.length; j++) {
           bugsHTML += "<a href=http://bugzilla.mozilla.org/show_bug.cgi?id=" + bugs[j] + ">bug " + bugs[j] + "</a>";
         }

         var table = $("#signature-table");
         table.append("<tr><td class='sig-property'>Signature</td><td><tt>" + sig.signature + "</tt></td></tr>"
                      + "<tr><td class='sig-property'>Reproduced</td><td>" + sig.reproduced + "</td></tr>"
                      + "<tr><td class='sig-property'>Url</td><td><a href=" + sig.url + " class='url'>" + sig.url + "</a></td></tr>"
                      + "<tr><td class='sig-property'>Exploitable</td><td>" + sig.exploitableclass + "</td></tr>"
                      + "<tr><td class='sig-property'>Bugs</td><td>" + bugsHTML + "</td></tr>");
      }
    </script>
  </head>
  <body>
    <div id="reproduced-message"></div>
    <div id="container">
        <table id="signature-table" cellspacing="0">
          <tbody>
          </tbody>
        </table>
    </div>
  </body>
</html>
