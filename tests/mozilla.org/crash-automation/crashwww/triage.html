<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Crash Automation Triage</title>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
    <link rel="stylesheet" href="crash.css" type="text/css">
    <link rel="stylesheet" href="jquery/style/ui.base.css" type="text/css">
    <link rel="stylesheet" href="jquery/style/jquery-ui-1.7.2.custom.css" type="text/css">
    <script src="jquery/jquery-1.3.2.min.js"></script>
    <script src="jquery/jquery-ui-1.7.2.custom.min.js"></script>
    <script src="crash-common.js"></script>
    <script src="triage.js"></script>
    <script src="bugzilla-config.js"></script>
    <script>
      $(document).ready(function() {
          getBugzillaConfig();
          fillBugzillaConfig(); // fill with cached information initially
          getTriageList();
          $('#file-bug-dialog').dialog({ closeOnEscape: false, autoOpen: false,
                            beforeclose : function() { $("#triage-list td").removeClass("filing-bug");},
                            height: 420, width: 600});
        })
    </script>
  </head>
  <body>
    <div id="header">
      <div id="title-header" class="big-title">
        <div id="firefox-header">Firefox</div>
        <div>Crash Automation</div>
      </div>
      <a href="/_utils/crashes/triage.html" class="small-section highlight">Triage</a>
      <a href="/_utils/crashes/workers.html" class="small-section">Workers</a>
      <a href="/_utils/crashes/view.html" class="small-section">Views</a>
    </div>

    <div id="container">
        <div id="message"></div>
        <table id="triage-list" cellspacing="0" class="view-table ui-helper-hidden">
          <tbody>
            <tr class="header-row">
              <th width="30%">Signature</th>
              <th width="30%">Reproduced URL</th>
              <th width="10%">Bug</th>
              <th width="10%">Related Bugs</th>
              <th width="10%">Worker</th>
              <th width="20%">Time</th>
            </tr>
          </tbody>
        </table>
    </div>
    <div id="file-bug-dialog" title="File Crash Bug" class="ui-helper-hidden">
       <div id="bug-login" class="ui-helper-hidden">
         <form id="bug-login-form" onsubmit="return false; // don't reload page">
         <div id="bug-login-title">Bugzilla Login Information</div>
         <table cellspacing="0" class="flex-both" id="login-table">
          <tbody>
            <tr>
              <td class="bug-field">Email</td>
              <td><input id="bug-email"></input></td>
            </tr>
            <tr>
              <td class="bug-field">Password</td>
              <td><input type="password" id="bug-password"></input></td>
            </tr>
            <tr>
              <td class="bug-field" id="bug-desc-field"></td>
              <td class="flex-both" id="bug-desc-cell">
                <button onclick="hideBugLogin();">Save Login</button>
              </td>
            </tr>
          </tbody>
        </table>
        </form>
       </div>
       <div id="bug-form" class="ui-helper-hidden flex-both">
        <table cellspacing="0" class="flex-both">
          <tbody>
            <tr>
              <td class="bug-field">Product</td>
              <td><select id="bug-product"></select></td>
            </tr>
            <tr>
              <td class="bug-field">Component</td>
              <td><select id="bug-component"></select></td>
            </tr>
            <tr>
              <td class="bug-field">Version</td>
              <td><select id="bug-version"></select></td>
            </tr>
            <tr>
              <td class="bug-field">OS</td>
              <td><select id="bug-os"></select></td>
            </tr>
            <tr>
              <td class="bug-field">Platform</td>
              <td><select id="bug-platform"></select></td>
            </tr>
            <tr>
              <td class="bug-field">Summary</td>
              <td class="flex-width"><input id="bug-summary"></input></td>
            </tr>
            <tr>
              <td class="bug-field">Url</td>
              <td class="flex-width"><input id="bug-url"></input></td>
            </tr>
            <tr>
              <td class="bug-field" id="bug-desc-field">Description</td>
              <td class="flex-both" id="bug-desc-cell"><textarea id="bug-description"></textarea></td>
            </tr>
            <tr>
              <td class="bug-field" id="bug-desc-field"></td>
              <td class="flex-width" id="bug-desc-cell">
                <div id="bug-submit-box">
                  <button id="bug-submit">Submit</button>
                  <span id="bug-logged-in">as 
                    <span id="bug-logged-in-login" onclick="showBugLogin();"></span>
                  </span>
                </div>
                <div id="bug-submitting" class="ui-helper-hidden">
                  Submitting...
                </div>
                <div id="bug-submit-error" class="ui-helper-hidden">
                  Error submitting: <span id="submit-error"></span>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </body>
</html>
